{% extends 'oragePage.html.twig' %}

{% block title %}Accueil - ORAGE {% endblock %}
{% block stylesheets %}
    {# Lien vers le fichier CSS sp√©cifique √† la page d'accueil #}
    <link rel="stylesheet" href={{ asset("styles/home.css") }}>
{% endblock %}

{% block navbody %}
    {% include "component/flashRenderer.html.twig" %}
    <div class="container-wrapper">
        {# Section d'introduction / Hero #}
        {% set banner_title = "Bienvenue chez <span class='hero-highlight'>ORAGE</span>" %}
        {% set banner_description = '<p class="hero-subtitle">
                Apprendre ensemble, sans barri√®res. <br/>
                D√©couvrez nos missions.
            </p>
            <div class="hero-actions">
                <a href="#missions" class="hero-button">
                    En savoir plus
                </a>
            </div>' %}
        {% include "component/banner.html.twig" %}

        {# Section Missions et Objectifs #}
        <section id="missions" class="missions-section orage-section-margin">
            <h2 class="section-title">Nos Missions et Objectifs</h2>
            <div class="missions-grid">
                {# Mission 1 #}
                <div class="mission-card">
                    <div class="mission-icon icon-light">üí°</div> {# Ic√¥ne placeholder #}
                    <h3 class="mission-title">Favoriser l'Acc√®s √† la Connaissance</h3>
                    <p class="mission-description">
                        Nous nous engageons √† rendre l'√©ducation accessible √† tous, en d√©veloppant des ressources
                        p√©dagogiques gratuites.
                    </p>
                </div>
                {# Mission 2 #}
                <div class="mission-card">
                    <div class="mission-icon icon-book">üìö</div> {# Ic√¥ne placeholder #}
                    <h3 class="mission-title">Soutenir l'√©tudiant</h3>
                    <p class="mission-description">
                        Notre objectif est d'accompagner chacun dans son parcours acad√©mique, en lui fournissant les
                        outils n√©cessaires √† la r√©ussite.
                    </p>
                </div>
                {# Objectif 1 #}
                <div class="mission-card">
                    <div class="mission-icon icon-handshake">ü§ù</div> {# Ic√¥ne placeholder #}
                    <h3 class="mission-title">Apprendre ensemble</h3>
                    <p class="mission-description">
                        Nous b√¢tissons un r√©seau de partage et de collaboration o√π chacun peut apprendre et contribuer
                        activement.
                    </p>
                </div>
            </div>
        </section>

        {# Section Derniers Ajouts (Cours & Exercices) #}
        {# A refaire √©ventuellement avec des requ√™tes BD #}
        <section class="latest-additions-section orage-section-margin">
            <h2 class="section-title">Nos Derniers Ajouts</h2>
            <div class="latest-additions-grid">
                {# Dernier Cours #}
                <div class="addition-card">
                    <img src="https://placehold.co/400x250/E0F2FE/2563EB?text=Cours+Placeholder"
                         alt="Placeholder pour un cours" class="addition-image">
                    <h3 class="addition-title">Nouveau Cours : Abcd</h3>
                    <p class="addition-description">
                        Une √¥ combien jolie description, qui pourrait √©ventuellement √™tre bas√©e sur une requ√™te √† la
                        base de donn√©es.
                    </p>
                    <a href="#" class="addition-link">Acc√©der au cours ‚Üí</a>
                </div>
                {# Dernier Exercice #}
                <div class="addition-card">
                    <img src="https://placehold.co/400x250/FEE2E2/DC2626?text=Exercice+Placeholder"
                         alt="Placeholder pour un exercice" class="addition-image">
                    <h3 class="addition-title">Nouvel Exercice : Abcd</h3>
                    <p class="addition-description">
                        Une √¥ combien jolie description, qui pourrait √©ventuellement √™tre bas√©e sur une requ√™te √† la
                        base de donn√©es.
                    </p>
                    <a href="#" class="addition-link">Commencer l'exercice
                        ‚Üí</a> {# Il faudrait ici rajouter le lien vers l'exercice en question #}
                </div>
            </div>
        </section>

        {# Section Derni√®res Nouveaut√©s (√âv√©nements) #}
        <section class="latest-news-section orage-section-margin">
            <h2 class="section-title">Nos Derni√®res Nouveaut√©s</h2>

            <div class="latest-news-grid">
                {# Nouveaut√© 1 : √âv√©nement #}
                {% for ann in annonces %}
                    {% if ann.visible %}
                        {% set visibility = "<span class='text-success'>Visible</span>" %}
                    {% else %}
                        {% set visibility = "<span class='text-danger'>Cach√© </span>" %}
                    {% endif %}
                    {% if ann.expirateAt < "now"|date("Y-m-d H:i:s") %}
                        {% set visibility = "<span class='text-danger'>Expir√© </span>" %}
                    {% endif %}
                    <div class="news-card">
                        <div class="news-icon icon-announcement">üì¢</div> {# Ic√¥ne annonce #}
                        <div>
                            <h3 class="news-title">{{ ann.title }}</h3>
                            <p class="news-description">
                                {{ ann.slug }}
                            </p>
                            <p class="news-date">{{ ann.createdAt|format_datetime(locale='fr',pattern="EEEE dd MMMM YYYY") }}</p>
                            <a href={{ url('article', {'id' : ann.id})}} class="news-link">Lire l'article</a>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </section>
    </div>
{% endblock %}
